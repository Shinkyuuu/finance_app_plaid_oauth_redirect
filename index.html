<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Plaid OAuth Redirect</title>
</head>
<body>
<script>
(async () => {
  const params = new URLSearchParams(window.location.search);
  const oauthStateId = params.get('oauth_state_id');

  if (!oauthStateId || !public_token) return;

  try {
    await fetch('https://umsdo186p8.execute-api.us-east-1.amazonaws.com/Stage2/oauth-complete', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ oauthStateId }),
    });
    document.body.innerHTML = '<h3>Bank login complete. You can return to the app.</h3>';
  } catch (err) {
    document.body.innerHTML = '<h3>Failed to notify backend.</h3>';
    console.error(err);
  }
})();
</script>
</body>
</html>
