<!DOCTYPE html>
<html>
<head><title>Plaid OAuth Complete</title></head>
<body>
<script>
  const params = new URLSearchParams(window.location.search);
  const oauth_state_id = params.get('oauth_state_id');

  if (oauth_state_id) {
    // Send the OAuth state ID to your backend Lambda
    fetch('https://umsdo186p8.execute-api.us-east-1.amazonaws.com/Stage2/exchange-public-token', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ oauth_state_id })
    })
    .then(() => {
      document.body.innerHTML = '<h2>OAuth Complete! You can return to the app.</h2>';
    })
    .catch((err) => {
      document.body.innerHTML = `<h2>Error: ${err.message}</h2>`;
    });
  } else {
    document.body.innerHTML = '<h2>No OAuth state received.</h2>';
  }
</script>
</body>
</html>
